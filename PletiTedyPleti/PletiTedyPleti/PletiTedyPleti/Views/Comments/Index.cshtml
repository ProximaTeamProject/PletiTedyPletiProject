@using Microsoft.AspNet.Identity
@model IEnumerable<PletiTedyPleti.Models.Comment>

@{
    ViewBag.Title = "Index";
}

<h2>Коментари</h2>

<span>
    @*@Html.Partial("~/Views/Comments/Create.cshtml");*@

    @Html.ActionLink("Добави коментар", "Create", "Comments")
</span>

<div class="table">
    @foreach (var item in Model)
    {
        <br/>
        <div><span><i>Автор: </i></span>@if (item.Author != null)
                                        {
                                            @item.Author.FullName;
                                        },<i> <span>Публикувано на: @item.Date</span></i>
        </div>
        <div>
            @Html.DisplayFor(modelItem => item.Body)
        </div>
        <div>
            @if (User.IsInRole("Administrators") || (item.Author != null && User.Identity.GetUserId() == item.Author.Id))
            {
                @Html.ActionLink("Edit", "Edit", "Comments", new { id = item.Id }, null)
                @:| @Html.ActionLink("Delete", "Delete", "Comments", new { id = item.Id }, null) |
            }

            @Html.ActionLink("Details", "Details", "Comments", new {id = item.Id}, null) 
        </div>
    }

</div>
